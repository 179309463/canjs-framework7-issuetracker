define(["mtemplate!app/pages/issuepage/issuepage.html","mtemplate!app/pages/issuepage/pagenavbar.html","basecontroller"],function(e,t,n){n.extend("Page.IssuePage",{},{template:e,preRender:function(e){e.attr("newComment",new Model.Comment)},renderNavbar:function(e){var n=this;e.html(t(this.options)),this.on(e.find("a#edit"),"click",function(e){e.stop(),App.openPopup(Page.EditIssuePage,{issue:n.options.issue})})},"a#post-comment click":function(e,t){t.stop();var n=this.options.newComment;n.attr("date",new Date),this.options.issue.addComment(n),this.options.attr("newComment",new Model.Comment)},"a#move-to-next-status click":function(e,t){t.stop();var n=this.options.issue;n.attr("status",n.nextStatus()),n.save()}})});